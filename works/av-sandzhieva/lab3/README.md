# Lab 3: Sobel Operator - Оператор Собеля

## Описание
**Цель работы**:  
Реализовать алгоритм выделения границ на изображении с помощью оператора Собеля, используя возможности параллельных вычислений на графическом процессоре (CUDA).

**Что было сделано**:
- Реализованы функции чтения/записи изображений в форматах PGM и BMP
- Разработан kernel sobelFilter с использованием shared memory и обработки гало-зоны (halo / boundary padding)
- Измерено время выполнения ядра с помощью cudaEvent
- Протестировано на стандартных изображениях

## Компиляция
```bash
make
```

## Запуск программы
```bash
./program images/House.bmp images/House2.bmp
```

## Результаты

Время выполнения ядра на различных изображениях:

| Изображение         | Размер       | Время ядра (мс) |
|---------------------|--------------|------------------|
| House.bmp           | 256 × 256    | 0.12            |
| otpusk.pgm          | 260 × 194    | 0.12            |
| Tiffany.bmp         | 512 × 512    | 0.12            |
| cat.bmp             | 728 × 782    | 0.12            |
| wallpaper.bmp       | 1920 × 1080  | 0.13            |

Видно, что время выполнения очень стабильно и слабо зависит от размера изображения.

### Исходное изображение и результат

**House**  
Исходное:  
![Дом](images/House.bmp)

Результат Собеля:  
![Результат Собеля](images/House2.bmp)

**Otpusk**  
Исходное:  
![Отпуск](images/otpusk.pgm)

Результат:  
![Результат Собеля](images/otpusk2.pgm)

**Tiffany**  
Исходное:  
![Тиффани](images/Tiffany.bmp)

Результат:  
![Результат Собеля](images/Tiffany2.bmp)

**Cat**  
Исходное:  
![Кошка](images/cat.bmp)

Результат:  
![Результат Собеля](images/cat2.bmp)

**Wallpaper** 
Исходное:  
![Wallpaper](images/wallpaper.bmp)

Результат:  
![Результат Собеля](images/wallpaper2.bmp)

## Выводы
- Использование shared memory существенно снижает количество обращений к глобальной памяти по сравнению с наивной реализацией.
- Обработка граничных условий через clamp и загрузка гало-областей позволяет корректно считать градиент даже у краёв тайлов.
- Ограничение максимального значения до 255 и приведение к unsigned char — стандартный подход для визуализации градиента Собеля.
- Программа корректно работает как с PGM (P5), так и с 24-битными BMP-файлами (преобразуя в grayscale по формуле 0.299R + 0.587G + 0.114B).
- Полученные результаты хорошо выделяют контуры объектов на всех тестовых изображениях.
- Время выполнения ядра остаётся очень низким (0.12–0.13 мс) даже на изображении Full HD (1920×1080), что демонстрирует высокую эффективность реализации на GPU.
